{"version":3,"sources":["Components/Filters/common.js","Components/Filters/QuantFilter.js","Components/Filters/CategoryFilter.js","Components/Filters/TimeFilter.js","Components/Table/csv.js","Components/Table/index.js","Components/App/index.js","reportWebVitals.js","index.js"],"names":["common_filter_classes","QuantFilter","col","className","catFunc","key","Set","row","struct","accepted","responsible","add","CatFilter","dispatch","l","values","sort","useState","selected","setSelected","useEffect","console","log","length","type","filter","r","some","s","multiple","value","onChange","e","target","options","o","map","c","onClick","TimeFilter","createCSVBlob","data","cols","out","push","accessor","i","j","join","Blob","DataTable","keys","columns","useMemo","k","Header","tableInstance","useTable","useSortBy","usePagination","getTableProps","getTableBodyProps","headerGroups","prepareRow","pageOptions","page","state","pageIndex","pageSize","gotoPage","previousPage","nextPage","setPageSize","canPreviousPage","canNextPage","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","class","getRowProps","cells","cell","getCellProps","disabled","defaultValue","Number","href","window","URL","createObjectURL","download","dataDisplayUpdate","action","vkeys","Object","display","vdata","cdata","initdata","include","undefined","builder","visibleData","visibleKeys","colLoopData","reducer","el","t","filterType","gotData","error","App","useReducer","fetch","then","d","json","catch","filter_els","colK","React","createElement","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4bef723c.chunk.js","sourcesContent":["const common_filter_classes = \"border border-3 shadow shadow-3 m-3 p-3\";\nexport { common_filter_classes };\n","import { common_filter_classes } from \"./common\";\n\nfunction quantFunc(key) {\n  const cb = (row, struct, accepted, responsible) => {\n    return struct;\n  };\n  return [() => [], cb];\n}\nfunction QuantFilter({ col }) {\n  return (\n    <div className={`${common_filter_classes} d-none`}>\n      <h5> QuantFilter for {col} </h5>\n      <p className=\"fst-italic\"> Coming soon </p>\n    </div>\n  );\n}\nexport { quantFunc, QuantFilter };\n","import React, { useState, useEffect } from \"react\";\n\nimport { common_filter_classes } from \"./common\";\n\nfunction catFunc(key) {\n  const cb = (row, struct, accepted, responsible) => {\n    if (accepted || responsible) {\n      struct.add(row[key]);\n    }\n    return struct;\n  };\n  return [() => new Set(), cb];\n}\nfunction CatFilter({ col, struct, dispatch }) {\n  let l = [...struct.values()].sort();\n  const [selected, setSelected] = useState([]);\n  useEffect(() => {\n    console.log(col, selected);\n    if (selected.length === 0) {\n      dispatch({ type: \"FILTER_UPDATE\", col: col, filter: (r) => true });\n    } else {\n      dispatch({\n        type: \"FILTER_UPDATE\",\n        col: col,\n        filter: (r) => selected.some((s) => s === r[col]),\n      });\n    }\n  }, [col, dispatch, selected]);\n  return (\n    <div className={common_filter_classes}>\n      <h5> Filter for {col} </h5>\n      <select\n        multiple\n        className=\"form-select\"\n        value={selected}\n        onChange={(e) =>\n          setSelected(\n            [...e.target.options].filter((o) => o.selected).map((o) => o.value)\n          )\n        }\n      >\n        {l.map((c) => (\n          <option key={c} value={c}>\n            {c}\n          </option>\n        ))}\n      </select>\n      <div className=\"btn btn-danger\" onClick={() => setSelected([])}>\n        {\" \"}\n        clear{\" \"}\n      </div>\n    </div>\n  );\n}\nexport { CatFilter, catFunc };\n","import { common_filter_classes } from \"./common\";\n\nfunction timeFunc(key) {\n  const cb = (row, struct, accepted, responsible) => {\n    return struct;\n  };\n  return [() => [], cb];\n}\nfunction TimeFilter({ col }) {\n  return (\n    <div className={`${common_filter_classes} d-none`}>\n      <h5> TimeFilter for {col} </h5>\n      <p className=\"fst-italic\"> Coming soon </p>\n    </div>\n  );\n}\nexport { timeFunc, TimeFilter };\n","export function createCSVBlob(data, cols) {\n  let out = [];\n  out.push(cols.map((c) => c.accessor));\n  for (let i = 0; i < data.length; i++) {\n    let row = [];\n    for (let j = 0; j < cols.length; j++) {\n      row.push(`\"${data[i][cols[j].accessor]}\"`);\n    }\n    out.push(row.join(\",\"));\n  }\n  return new Blob([out.join(\"\\n\")], { type: \"text/csv\" });\n}\n","import { useMemo } from \"react\";\nimport { useTable, useSortBy, usePagination } from \"react-table\";\n\nimport { createCSVBlob } from \"./csv\";\n\nfunction DataTable({ data, keys }) {\n  let columns = useMemo(() => {\n    return keys.map((k) => {\n      return { Header: k, accessor: k };\n    });\n  }, [keys]);\n  const tableInstance = useTable({ columns, data }, useSortBy, usePagination);\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    prepareRow,\n    pageOptions,\n    page,\n    state: { pageIndex, pageSize },\n    gotoPage,\n    previousPage,\n    nextPage,\n    setPageSize,\n    canPreviousPage,\n    canNextPage,\n  } = tableInstance;\n  return (\n    <div>\n      <table className=\"table\" {...getTableProps()}>\n        <thead>\n          {headerGroups.map((headerGroup) => (\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {headerGroup.headers.map((column) => (\n                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\n                  {column.render(\"Header\")}\n                  <span>\n                    {column.isSorted ? (\n                      column.isSortedDesc ? (\n                        <i class=\"bi bi-arrow-down-square-fill\"></i>\n                      ) : (\n                        <i class=\"bi bi-arrow-up-square-fill\"></i>\n                      )\n                    ) : (\n                      \"\"\n                    )}\n                  </span>\n                </th>\n              ))}\n            </tr>\n          ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n          {page.map((row) => {\n            prepareRow(row);\n            return (\n              <tr {...row.getRowProps()}>\n                {row.cells.map((cell) => {\n                  return (\n                    <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <div>\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => previousPage()}\n          disabled={!canPreviousPage}\n        >\n          Previous Page\n        </button>\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => nextPage()}\n          disabled={!canNextPage}\n        >\n          Next Page\n        </button>\n        <div>\n          Page{\" \"}\n          <em>\n            {pageIndex + 1} of {pageOptions.length}\n          </em>\n        </div>\n        <div>Go to page:</div>\n        <input\n          type=\"number\"\n          defaultValue={pageIndex + 1 || 1}\n          onChange={(e) => {\n            const page = e.target.value ? Number(e.target.value) - 1 : 0;\n            gotoPage(page);\n          }}\n        />\n        <select\n          className=\"form-select\"\n          value={pageSize}\n          onChange={(e) => {\n            setPageSize(Number(e.target.value));\n          }}\n        >\n          {[10, 20, 30, 40, 50].map((pageSize) => (\n            <option key={pageSize} value={pageSize}>\n              Show {pageSize}\n            </option>\n          ))}\n        </select>\n        <a\n          className=\"btn btn-primary\"\n          href={window.URL.createObjectURL(createCSVBlob(data, columns))}\n          download=\"pat-filtered-export.csv\"\n        >\n          {\" \"}\n          Download as CSV{\" \"}\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default DataTable;\n","import React, { useReducer, useEffect } from \"react\";\n\nimport { QuantFilter, quantFunc } from \"../Filters/QuantFilter\";\nimport { CatFilter, catFunc } from \"../Filters/CategoryFilter\";\nimport { TimeFilter, timeFunc } from \"../Filters/TimeFilter\";\n\nimport DataTable from \"../Table\";\n/*\n  What I'm think wrt in data display/select optoins\n  - \"D\": this column should be included in display\n  - \"C\": every option in this column should be a filterable category\n  - \"Q\": This should be a quantitativly filterable column\n  - \"T\": This column should allow time based filtering\n  \n  Here's what the implementation should look like:\n  We start by fetching the data and parsing it into the standard list of objects\n  format. We also parse the metadata header into a dict of column name -> value\n  (aka standard format). Then we initialize our filter data structure which is\n  just a dict of column name to filter function. The filters all start out just\n  being true. \n  Then the loop. We loop through the data, simultaneously filtering, and\n  building up the list of filter options as described below. The list of filter\n  options are later fed into the filters.\n  Then we initialize our filters elements. For each column which requires a\n  filter we create the appropriate filter type element; either\n  <QuantFilter> or <CategoryFilter> or whatever. Each of these filters has an\n  associated function which you use while iterating through all of the data so\n  that they can keep track of which filters are valid. The function like\n  maintains some datastructure returning the initial datastructure if not passed\n  anything and otherwise it takes the data structure and a new element and\n  returns the updated datastructure. The filter elements call a callback to update their filter and things loop again. The filters also need an option to clear the filter.\n */\n\nfunction gotData(state, action) {\n  let keys = action.keys;\n  let cols = {};\n  for (let key of Object.keys(keys)) {\n    let initdata = undefined;\n    let builder = undefined;\n    let el = undefined;\n    let t = keys[key];\n    switch (t.filterType) {\n      case \"Q\":\n        el = QuantFilter;\n        [initdata, builder] = quantFunc(key);\n        break;\n      case \"C\":\n        el = CatFilter;\n        [initdata, builder] = catFunc(key);\n        break;\n      case \"T\":\n        el = TimeFilter;\n        [initdata, builder] = timeFunc(key);\n        break;\n      default:\n        break;\n    }\n    cols[key] = {\n      filter: (row) => true,\n      display: t.display,\n      el: el,\n      builder: builder,\n      initdata: initdata,\n    };\n  }\n  let data = [];\n  for (let i = 0; i < action.data.length; i++) {\n    let row = {};\n    for (let col of Object.keys(action.data[i])) {\n      switch (keys[col].filterType) {\n        case \"Q\":\n          row[col] = action.data[i][col];\n          break;\n        case \"C\":\n          row[col] = `${action.data[i][col]}`;\n          break;\n        case \"T\":\n          row[col] = action.data[i][col];\n          break;\n        default:\n          row[col] = action.data[i][col];\n          break;\n      }\n    }\n    data.push(row);\n  }\n  state = { ...state, data: data, keys: action.keys, columns: cols };\n  return dataDisplayUpdate(state, {});\n}\nfunction dataDisplayUpdate(state, action) {\n  const { columns, data } = state;\n  let vkeys = [];\n  for (let col of Object.keys(columns)) {\n    if (columns[col].display) {\n      vkeys.push(col);\n    }\n  }\n  let vdata = [];\n  let cdata = {};\n  for (let col of Object.keys(columns)) {\n    cdata[col] =\n      typeof columns[col].initdata === \"function\" && columns[col].initdata();\n  }\n  for (let i = 0; i < data.length; i++) {\n    let include = true;\n    let responsible = null;\n    for (let col of Object.keys(columns)) {\n      if (!columns[col].filter(data[i])) {\n        include = false;\n        if (responsible === null) {\n          responsible = col;\n        } else {\n          responsible = undefined;\n        }\n      }\n    }\n    for (let col of Object.keys(columns)) {\n      if (columns[col].builder) {\n        cdata[col] = columns[col].builder(\n          data[i],\n          cdata[col],\n          include,\n          col === responsible\n        );\n      }\n    }\n    if (include) {\n      vdata.push(data[i]);\n    }\n  }\n  return {\n    ...state,\n    visibleData: vdata,\n    visibleKeys: vkeys,\n    colLoopData: cdata,\n  };\n}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"DATA\":\n      state = gotData(state, action);\n      break;\n    case \"ERROR\":\n      state = { ...state, error: action.error };\n      break;\n    case \"DATA_DISPLAY_UPDATE\":\n      state = dataDisplayUpdate(state, action);\n      break;\n    case \"FILTER_UPDATE\":\n      let columns = state.columns;\n      columns[action.col].filter = action.filter;\n      state = { ...state, columns: columns };\n      state = dataDisplayUpdate(state, action);\n      break;\n    default:\n      break;\n  }\n  return state;\n}\n\nfunction App() {\n  const [\n    { data, error, columns, visibleData, colLoopData, visibleKeys },\n    dispatch,\n  ] = useReducer(reducer, {\n    data: [],\n    keys: {},\n    error: null,\n    columns: {},\n    colLoopData: {},\n    visibleKeys: [],\n  });\n\n  useEffect(() => {\n    fetch(\"data.json\")\n      .then((d) => d.json())\n      .then((d) => {\n        dispatch({ type: \"DATA\", data: d.data, keys: d.keys });\n      })\n      .catch((e) => {\n        dispatch({ type: \"ERROR\", error: e });\n      });\n  }, []);\n\n  if (error) {\n    return <h5> Error Occurred {error} </h5>;\n  } else if (data.length === 0) {\n    return <h5> Loading </h5>;\n  }\n\n  let filter_els = [];\n  for (let colK of Object.keys(columns)) {\n    let col = columns[colK];\n    if (col.el) {\n      filter_els.push(\n        React.createElement(col.el, {\n          key: colK,\n          col: colK,\n          struct: colLoopData[colK],\n          dispatch: dispatch,\n        })\n      );\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"display-1 text-center\"> Welcome to blah blah </h1>\n      <h1 class=\"display-6\">Introduction</h1>\n      <p>\n        The Soybean Innovation Labâ€™s Pan-African Soybean Variety Trials (PAT)\n        fast-track the introduction and testing of commercial soybean varieties\n        sourced from across Africa, the U.S., Australia, and Latin America to\n        provide the private sector, farmers, and processors with access to a\n        broader selection of seed than what is currently available. The program\n        consortium leverages its role as an independent third party and its\n        unique access to international, regional, and national supplies of\n        high-yielding germplasm to swiftly bring new varieties to market.\n      </p>\n      <p>\n        The PAT database covers results from trials in Benin, Cameroon,\n        Ethiopia, Ghana, Kenya, Malawi, Mali, Mozambique, Nigeria, Rwanda,\n        Sudan, Uganda, Zambia and Zimbabwe from 2015 to 2020.{\" \"}\n        <b>\n          The tool will be continuously updated to include other countries and\n          seasons of testing.\n        </b>\n      </p>\n      <h1 class=\"display-6\">Instructions</h1>\n      <p>\n        To explore the PAT database start with selecting one of the filters\n        below. The filters are connected, and the first selection will determine\n        the options available in the other filters. If you decide to change the\n        filter, you can click on another option within the same filter or select\n        the option <b>clear</b>. The result of the selected filters will show up\n        as a table at the bottom of the screen. Please click{\" \"}\n        <b>Download as CSV</b> to download the data.\n      </p>\n      <p>\n        {\" \"}\n        Questions about this data?{\" \"}\n        <a href=\"mailto:soybeaninnovationlab@illinois.edu\">\n          {\" \"}\n          Please Contact SIL{\" \"}\n        </a>{\" \"}\n      </p>\n      <div className=\"d-flex flex-wrap justify-content-evenly\">\n        {filter_els}\n      </div>\n      <div>\n        <DataTable keys={visibleKeys} data={visibleData} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"./index.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}